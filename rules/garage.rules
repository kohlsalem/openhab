import org.openhab.core.library.types.*

rule "FeedbackOpen"
when 
  Item Hoermann received update "OPEN"
then
   if( Garage.state != ON)
   {
   	 Garage.sendCommand(ON) 
   } 
end
rule "FeedbackClose"
when 
  Item Hoermann received update "CLOSED"
then
   if( Garage.state != OFF)
   {
   	 Garage.sendCommand(OFF) 
   } 
end
rule "GarageOpen"
when
  Item Garage received command ON
then
   if( (Hoermann.state != null) && (Hoermann.state == "CLOSED"))
   {
     Hoermann.sendCommand("DOOPEN")  
   }
end

rule "GarageClose"
when
  Item Garage received command
then
   if( (Hoermann.state != null) && (Hoermann.state == "OPEN"))
   {
     Hoermann.sendCommand("DOCLOSE")     
   }
end


/* 
var Number GarageOld = 0

 
rule "GarageSetInt"
when
  Item Garage received command  
then
    logDebug("LeseLampe", "Entering with Command : "+GarageOld.toString+"-->"+receivedCommand.toString)
  

   if( receivedCommand==80){
       logDebug("LeseLampe", "Recieved 80==Ã–ffnen")
       Thread::sleep(3000)
        Garage.sendCommand(0) //offen
   } else if( receivedCommand==20){
      logDebug("LeseLampe", "Recieved 20==Schliessen")
      Thread::sleep(3000)
        Garage.sendCommand(100)//geschlossen
   }
   logDebug("LeseLampe", "Exit")
   GarageOld = receivedCommand
 end
*/
